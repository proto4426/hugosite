---
output: 
  html_document:
    self_contained: true
    lib_dir: libs
    theme: null
    css: null
    hilight: null
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/viz/viz.js"></script>
<link href="/rmarkdown-libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="/rmarkdown-libs/grViz-binding/grViz.js"></script>


<p>Tonight I’m trying out the <strong>DiagrammeR</strong> R package, one of the <a href="http://www.htmlwidgets.org/">html widgets</a> javascript bindings for R. I happen to be trying to make a copule flowcharts for research right now, and I figure this is a good way to procrastinate while feeling like I’m learning something.</p>
<pre class="r"><code>install.packages(&quot;DiagrammeR&quot;)
library(DiagrammeR)</code></pre>
<p>What’s inside?</p>
<pre class="r"><code>ls(&quot;package:DiagrammeR&quot;)</code></pre>
<pre><code>##   [1] &quot;%&gt;%&quot;                          &quot;add_balanced_tree&quot;           
##   [3] &quot;add_cycle&quot;                    &quot;add_edge&quot;                    
##   [5] &quot;add_edge_df&quot;                  &quot;add_edges_from_table&quot;        
##   [7] &quot;add_edges_w_string&quot;           &quot;add_full_graph&quot;              
##   [9] &quot;add_global_graph_attrs&quot;       &quot;add_n_nodes&quot;                 
##  [11] &quot;add_n_nodes_ws&quot;               &quot;add_node&quot;                    
##  [13] &quot;add_node_df&quot;                  &quot;add_nodes_from_df_cols&quot;      
##  [15] &quot;add_nodes_from_table&quot;         &quot;add_path&quot;                    
##  [17] &quot;add_prism&quot;                    &quot;add_star&quot;                    
##  [19] &quot;add_to_series&quot;                &quot;cache_edge_attrs&quot;            
##  [21] &quot;cache_edge_attrs_ws&quot;          &quot;cache_edge_count_ws&quot;         
##  [23] &quot;cache_node_attrs&quot;             &quot;cache_node_attrs_ws&quot;         
##  [25] &quot;cache_node_count_ws&quot;          &quot;clear_global_graph_attrs&quot;    
##  [27] &quot;clear_selection&quot;              &quot;colorize_edge_attrs&quot;         
##  [29] &quot;colorize_node_attrs&quot;          &quot;combine_edfs&quot;                
##  [31] &quot;combine_graphs&quot;               &quot;combine_ndfs&quot;                
##  [33] &quot;copy_edge_attrs&quot;              &quot;copy_node_attrs&quot;             
##  [35] &quot;create_complement_graph&quot;      &quot;create_edge_df&quot;              
##  [37] &quot;create_graph&quot;                 &quot;create_node_df&quot;              
##  [39] &quot;create_random_graph&quot;          &quot;create_series&quot;               
##  [41] &quot;create_subgraph_ws&quot;           &quot;delete_edge&quot;                 
##  [43] &quot;delete_edges_ws&quot;              &quot;delete_global_graph_attrs&quot;   
##  [45] &quot;delete_node&quot;                  &quot;delete_nodes_ws&quot;             
##  [47] &quot;DiagrammeR&quot;                   &quot;DiagrammeROutput&quot;            
##  [49] &quot;do_bfs&quot;                       &quot;do_dfs&quot;                      
##  [51] &quot;drop_edge_attrs&quot;              &quot;drop_node_attrs&quot;             
##  [53] &quot;edge_count&quot;                   &quot;edge_info&quot;                   
##  [55] &quot;edge_present&quot;                 &quot;edge_rel&quot;                    
##  [57] &quot;export_csv&quot;                   &quot;export_graph&quot;                
##  [59] &quot;from_adj_matrix&quot;              &quot;from_igraph&quot;                 
##  [61] &quot;generate_dot&quot;                 &quot;get_all_connected_nodes&quot;     
##  [63] &quot;get_articulation_points&quot;      &quot;get_betweenness&quot;             
##  [65] &quot;get_bridging&quot;                 &quot;get_cache&quot;                   
##  [67] &quot;get_closeness&quot;                &quot;get_cmty_edge_btwns&quot;         
##  [69] &quot;get_cmty_fast_greedy&quot;         &quot;get_cmty_l_eigenvec&quot;         
##  [71] &quot;get_cmty_louvain&quot;             &quot;get_cmty_walktrap&quot;           
##  [73] &quot;get_common_nbrs&quot;              &quot;get_constraint&quot;              
##  [75] &quot;get_degree_distribution&quot;      &quot;get_degree_histogram&quot;        
##  [77] &quot;get_dice_similarity&quot;          &quot;get_eccentricity&quot;            
##  [79] &quot;get_edge_attrs&quot;               &quot;get_edge_df&quot;                 
##  [81] &quot;get_edge_ids&quot;                 &quot;get_edges&quot;                   
##  [83] &quot;get_global_graph_attrs&quot;       &quot;get_graph_diameter&quot;          
##  [85] &quot;get_graph_from_series&quot;        &quot;get_graph_name&quot;              
##  [87] &quot;get_graph_time&quot;               &quot;get_jaccard_similarity&quot;      
##  [89] &quot;get_min_spanning_tree&quot;        &quot;get_nbrs&quot;                    
##  [91] &quot;get_node_attrs&quot;               &quot;get_node_df&quot;                 
##  [93] &quot;get_node_ids&quot;                 &quot;get_non_nbrs&quot;                
##  [95] &quot;get_paths&quot;                    &quot;get_periphery&quot;               
##  [97] &quot;get_predecessors&quot;             &quot;get_s_connected_cmpts&quot;       
##  [99] &quot;get_selection&quot;                &quot;get_similar_nbrs&quot;            
## [101] &quot;get_successors&quot;               &quot;get_w_connected_cmpts&quot;       
## [103] &quot;graph_count&quot;                  &quot;graph_info&quot;                  
## [105] &quot;grViz&quot;                        &quot;grVizOutput&quot;                 
## [107] &quot;image_icon&quot;                   &quot;import_graph&quot;                
## [109] &quot;invert_selection&quot;             &quot;is_graph_connected&quot;          
## [111] &quot;is_graph_directed&quot;            &quot;is_graph_empty&quot;              
## [113] &quot;join_edge_attrs&quot;              &quot;join_node_attrs&quot;             
## [115] &quot;layout_nodes_w_string&quot;        &quot;mermaid&quot;                     
## [117] &quot;mk_cond&quot;                      &quot;mutate_edge_attrs&quot;           
## [119] &quot;mutate_node_attrs&quot;            &quot;node_count&quot;                  
## [121] &quot;node_info&quot;                    &quot;node_present&quot;                
## [123] &quot;node_type&quot;                    &quot;nudge_node_positions_ws&quot;     
## [125] &quot;recode_edge_attrs&quot;            &quot;recode_node_attrs&quot;           
## [127] &quot;remove_from_series&quot;           &quot;rename_edge_attrs&quot;           
## [129] &quot;rename_node_attrs&quot;            &quot;renderDiagrammeR&quot;            
## [131] &quot;render_graph&quot;                 &quot;render_graph_from_series&quot;    
## [133] &quot;renderGrViz&quot;                  &quot;replace_in_spec&quot;             
## [135] &quot;rescale_edge_attrs&quot;           &quot;rescale_node_attrs&quot;          
## [137] &quot;rev_edge_dir&quot;                 &quot;rev_edge_dir_ws&quot;             
## [139] &quot;select_edges&quot;                 &quot;select_edges_by_edge_id&quot;     
## [141] &quot;select_edges_by_node_id&quot;      &quot;select_last_edge&quot;            
## [143] &quot;select_last_node&quot;             &quot;select_nodes&quot;                
## [145] &quot;select_nodes_by_degree&quot;       &quot;select_nodes_by_id&quot;          
## [147] &quot;select_nodes_in_neighborhood&quot; &quot;select_rev_edges_ws&quot;         
## [149] &quot;series_info&quot;                  &quot;set_cache&quot;                   
## [151] &quot;set_edge_attrs&quot;               &quot;set_edge_attrs_ws&quot;           
## [153] &quot;set_global_graph_attrs&quot;       &quot;set_graph_name&quot;              
## [155] &quot;set_graph_time&quot;               &quot;set_graph_undirected&quot;        
## [157] &quot;set_node_attrs&quot;               &quot;set_node_attrs_ws&quot;           
## [159] &quot;set_node_attr_to_display&quot;     &quot;set_node_position&quot;           
## [161] &quot;subset_series&quot;                &quot;to_igraph&quot;                   
## [163] &quot;trav_both&quot;                    &quot;trav_both_edge&quot;              
## [165] &quot;trav_in&quot;                      &quot;trav_in_edge&quot;                
## [167] &quot;trav_in_node&quot;                 &quot;trav_out&quot;                    
## [169] &quot;trav_out_edge&quot;                &quot;trav_out_node&quot;               
## [171] &quot;trigger_script&quot;               &quot;visnetwork&quot;                  
## [173] &quot;vivagraph&quot;                    &quot;x11_hex&quot;</code></pre>
<p>Following the video on the <a href="http://rich-iannone.github.io/DiagrammeR/">website</a></p>
<pre class="r"><code>grViz(&quot;
  digraph boxes_and_circles{
  
  node [shape = box]
  A; B; C; D
  
  
  }
      &quot;)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"diagram":"\n  digraph boxes_and_circles{\n  \n  node [shape = box]\n  A; B; C; D\n  \n  \n  }\n      ","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>The video is nice, but to really learn how to use the package check out the <a href="http://rich-iannone.github.io/DiagrammeR/docs.html">docs</a> on the website. There are apparently two graphing engines the packages uses, <code>grViz</code> and <code>mermaid</code>. As an exercise to get familiar with the package, I’ll try using both to diagram a hierarchical model from my Bayes homework.</p>
<pre class="r"><code>grViz(&quot;
digraph bayesModel {
graph [overlap = true, fontsize = 10]

  # I&#39;ll make the data a triangle
  node [shape = triangle,
        fontname = Helvetica]
  y
  
  # parameters will be boxes
  node [shape = box,
        fontname = Helvetica]
  theta; sigma2; mu; tau2; lambda; phi2; psi; 
  delta; gamma; omega2; c; d

  # distributions will be circles.
  node [shape = circle,
        fixedsize = false,
        width = 0.9] // sets as circles
  normal1 normal2 normal3 normal4 invGamma1 invGamma2

  # several &#39;edge&#39; statements
  {gamma omega2}-&gt;normal1-&gt;lambda 
  {c d}-&gt;invGamma1-&gt;phi2
  {lambda phi2}-&gt;normal2-&gt;mu
  {psi delta}-&gt;invGamma2-&gt;tau2
  {mu tau2}-&gt;normal3-&gt;theta
  {theta sigma2}-&gt;normal4-&gt;y
}
&quot;)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"diagram":"\ndigraph bayesModel {\ngraph [overlap = true, fontsize = 10]\n\n  # I\"ll make the data a triangle\n  node [shape = triangle,\n        fontname = Helvetica]\n  y\n  \n  # parameters will be boxes\n  node [shape = box,\n        fontname = Helvetica]\n  theta; sigma2; mu; tau2; lambda; phi2; psi; \n  delta; gamma; omega2; c; d\n\n  # distributions will be circles.\n  node [shape = circle,\n        fixedsize = false,\n        width = 0.9] // sets as circles\n  normal1 normal2 normal3 normal4 invGamma1 invGamma2\n\n  # several \"edge\" statements\n  {gamma omega2}->normal1->lambda \n  {c d}->invGamma1->phi2\n  {lambda phi2}->normal2->mu\n  {psi delta}->invGamma2->tau2\n  {mu tau2}->normal3->theta\n  {theta sigma2}->normal4->y\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p>Here’s mermaid [<em>edit: this is a screenshot, since the auto-generated javascript was messing up the formatting of my RMarkdown rendering</em>]:</p>
<pre class="r"><code>mermaid(&quot;
graph TD
  a[gamma]--&gt;c(normal1)
  b[omega2]--&gt;c(normal1)
  c--&gt;d[lambda]
  e[c]--&gt;g(invGamma1)
  f[d]--&gt;g(invGamma1)
  g--&gt;h[phi2]
  d--&gt;k(normal2)
  h--&gt;k(normal2)
  k--&gt;l[mu]
  m[psi]--&gt;o(invGamma2)
  n[delta]--&gt;o(invGamma2)
  o(invGamma2)--&gt;p[tau2]
  l--&gt;q(normal3)
  p--&gt;q(normal3)
  q--&gt;r[theta]
  r--&gt;t(normal4)
  s[sigma2]--&gt;t(normal4)
  t--&gt;u&gt;y]
&quot;)</code></pre>
<div class="figure">
<img src="blog_images/mermaidDiagram.png" alt="Mermaid Diagram" />
<p class="caption">Mermaid Diagram</p>
</div>
<p>I can’t say I found this particularly efficient–mermaid felt especially cumbersome to code, despite straightforward syntax–but it’s possible that with practice I could find it useful. Or that there are shortcuts that I’m missing. Also it was unclear whether important things like LaTeX math are supported. I do like the output though.</p>
